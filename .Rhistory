col="gray")#takes all Mexico plot, plot just Yucatan
plot(st_geometry(urbana2),add=T,col="brown")
rootdir2="C:/Users/Silvio/Documents/ArcGIS Explorer/My Basemaps/encuesta_intercensal_2015 Diego/encuesta_intercensal_2015/shps/yuc/"
mapdir2="encuesta_intercensal_2015 Diego/encuesta_intercensal_2015/shps/yuc/"
rootdir2="C:/Users/Silvio/Documents/ArcGIS Explorer/My Basemaps/"
paste0(rootdir2,mapdir2
)
paste0(rootdir2,mapdir2,"yuc_ageb_urbana.shp")
##
urbana<- st_read(paste0(rootdir2,mapdir2,"yuc_ageb_urbana.shp"),quiet=T)#encuesta intercensal
##
#Map 1
par(mar=c(2.1,2.1,2.1,2.1))#margins
plot(st_geometry(mex0))#plots all of Mexico
plot(st_geometry(mex0),xlim=c(-90.75,-87.25),ylim=c(19.5,21.75),bg="lightblue",
col="gray")#takes all Mexico plot, plot just Yucatan
plot(st_geometry(urbana),add=T,col="brown")
plot(st_geometry(urbana2),add=T,col="green")
##
#Map 1
par(mar=c(2.1,2.1,2.1,2.1))#margins
plot(st_geometry(mex0))#plots all of Mexico
plot(st_geometry(mex0),xlim=c(-90.75,-87.25),ylim=c(19.5,21.75),bg="lightblue",
col="gray")#takes all Mexico plot, plot just Yucatan
plot(st_geometry(urbana2),add=T,col="green")
plot(st_geometry(urbana),add=T,col="red")
plot(st_geometry(rural),add=T,col="#99FF99")
rural<-st_read(paste0(rootdir2,mapdir2,"yuc_ageb_rural.shp"),quiet=T,stringsAsFactors = F)#Encuesta intercensal
plot(st_geometry(rural),add=T,col="#99FF99")
head(rural)
head(urbana)
##
#Map 1
par(mar=c(2.1,2.1,2.1,2.1))#margins
plot(st_geometry(mex0))#plots all of Mexico
plot(st_geometry(mex0),xlim=c(-90.75,-87.25),ylim=c(19.5,21.75),bg="lightblue",
col="gray")#takes all Mexico plot, plot just Yucatan
plot(st_geometry(urbana2),add=T,col="green")
plot(st_geometry(mex2),add=T,col="red")
plot(st_geometry(rural),add=T,col="#99FF99")
##
#Map 1
par(mar=c(2.1,2.1,2.1,2.1))#margins
plot(st_geometry(mex0))#plots all of Mexico
plot(st_geometry(mex0),xlim=c(-90.75,-87.25),ylim=c(19.5,21.75),bg="lightblue",
col="gray")#takes all Mexico plot, plot just Yucatan
plot(st_geometry(mex2),add=T,col="red")
plot(st_geometry(urbana2),add=T,col="green")
##
#Map 1
par(mar=c(2.1,2.1,2.1,2.1))#margins
plot(st_geometry(mex0))#plots all of Mexico
plot(st_geometry(mex0),xlim=c(-90.75,-87.25),ylim=c(19.5,21.75),bg="lightblue",
col="gray")#takes all Mexico plot, plot just Yucatan
plot(st_geometry(mex2),add=T,col="red")
plot(st_geometry(urbana2),add=T,col="green")
plot(urbana2$geometry[236],add=T,col="blue")
plot(mex2$geometry[88],add=T,col="brown")
par(mar=c(2.1,2.1,2.1,2.1))#margins
plot(st_geometry(mex0))#plots all of Mexico
plot(st_geometry(mex0),xlim=c(-90.75,-87.25),ylim=c(19.5,21.75),bg="lightblue",
col="gray")#takes all Mexico plot, plot just Yucatan
plot(st_geometry(mex2),add=T,col="#99FF99")
plot(st_geometry(urbana2),add=T,col="red")
plot(urbana2$geometry[236],add=T,col="blue")
plot(mex2$geometry[88],add=T,col="yellow")
plot(urbana2$geometry[162],add=T,col="blue")
plot(urbana2$geometry[14],add=T,col="blue")
plot(mex2$geometry[46])#plotting Merida, 46; Opichen in 55; tekax & tizimin, 79 & 96; Teya, 88;
plot(urbana2$geometry[162],add=T)#14 and 162 for Cholul; 61 and 222 for Opichen; 102, 130 MCP
head(rural)
#Ben's code below
loc <- read.csv(paste0(rootdir2,mapdir2,"catalogos/catalogo de municipios.csv"));head(loc)
rootdir
rootdir1
rootdir2
mex0 <- st_read(paste0(rootdir2,"gadm36_MEX_shp/gadm36_MEX_0.shp"),quiet=T,stringsAsFactors = F)
mex1 <- st_read(paste0(rootdir2,"gadm36_MEX_shp/gadm36_MEX_1.shp"),quiet=T,stringsAsFactors = F)
mex2.1 <- st_read(paste0(rootdir2,"gadm36_MEX_shp/gadm36_MEX_2.shp"),quiet=T,stringsAsFactors = F)
##
#Map 1
par(mar=c(2.1,2.1,2.1,2.1))#margins
plot(st_geometry(mex0))#plots all of Mexico
plot(st_geometry(mex0),xlim=c(-90.75,-87.25),ylim=c(19.5,21.75),bg="lightblue",
col="gray")#takes all Mexico plot, plot just Yucatan
# plot(st_geometry(mex2),add=T,col="#99FF99")
plot(st_geometry(mex2.1),add=T,col="#99FF99")
plot(st_geometry(urbana2),add=T,col="red")
View(mex2.1)
class(mex2.1$GID_1[1])
mex2 <- subset(mex2.1, mex2.1$GID_1=="MEX.31_1")
mex2.1 <- subset(mex2.1, mex2.1$GID_1=="MEX.31_1")
#INEGI mapa
mex2 <- st_read("Shapefiles/MEX_adm2.shp",quiet=T,stringsAsFactors = F)
mex2 <- subset(mex2, mex2$ID_1==31)
length(mex2$ID_0)
length(mex2.1$GID_0)
par(mar=c(2.1,2.1,2.1,2.1))#margins
plot(st_geometry(mex0))#plots all of Mexico
plot(st_geometry(mex0),xlim=c(-90.75,-87.25),ylim=c(19.5,21.75),bg="lightblue",
col="gray")#takes all Mexico plot, plot just Yucatan
# plot(st_geometry(mex2),add=T,col="#99FF99")
plot(st_geometry(mex2.1),add=T,col="#99FF99")
plot(st_geometry(urbana2),add=T,col="red")
par(mar=c(2.1,2.1,2.1,2.1))#margins
plot(st_geometry(mex0))#plots all of Mexico
plot(st_geometry(mex0),xlim=c(-90.75,-87.25),ylim=c(19.5,21.75),bg="lightblue",
col="gray")#takes all Mexico plot, plot just Yucatan
plot(st_geometry(rural),add=T,col="#99FF99")
plot(st_geometry(urbana2),add=T,col="red")
View(rural)
plot(st_geometry(rural$geometry[235:239]))
plot(st_geometry(urbana2$geometry[10]),add=T,col="brown")
plot(st_geometry(rural$geometry[235:239]),add=T,col="green")
length(unique(rural$CVE_MUN))
##
#Map 1
par(mar=c(2.1,2.1,2.1,2.1))#margins
plot(st_geometry(mex0))#plots all of Mexico
plot(st_geometry(mex0),xlim=c(-90.75,-87.25),ylim=c(19.5,21.75),bg="lightblue",
col="gray")#takes all Mexico plot, plot just Yucatan
par(mar=c(2.1,2.1,2.1,2.1))#margins
plot(st_geometry(mex0))#plots all of Mexico
plot(st_geometry(mex0),xlim=c(-90.75,-87.25),ylim=c(19.5,21.75),bg="lightblue",
col="gray")#takes all Mexico plot, plot just Yucatan
# plot(st_geometry(mex2),add=T,col="#99FF99")
# plot(st_geometry(mex2.1),add=T,col="#99FF99")
plot(st_geometry(rural),add=T,col="#99FF99")
plot(st_geometry(urbana2),add=T,col="red")
plot(rural$geometry[198],add=T,col="yellow")#Teya mun
plot(urbana2$geometry[236],add=T,col="blue")#Teya
urbana2[236,]
urbana2[235,]
plot(urbana2$geometry[235],add=T,col="blue")#Teya
##
#Map 1
par(mar=c(2.1,2.1,2.1,2.1))#margins
plot(st_geometry(mex0))#plots all of Mexico
plot(st_geometry(mex0),xlim=c(-90.75,-87.25),ylim=c(19.5,21.75),bg="lightblue",
col="gray")#takes all Mexico plot, plot just Yucatan
plot(st_geometry(mex2),add=T,col="#99FF99")
mex2[88,]
plot(mex2$geometry[88],add=T,col="yellow")#Teya mun
plot(urbana2$geometry[235],add=T,col="blue")#Teya
plot(st_geometry(urbana2),add=T,col="red")
plot(urbana2$geometry[235],add=T,col="blue")#Teya
# runif
###########################################################################################
urbana2 <- st_read("Shapefiles/INEGI mapa/localidad250_a.shp",quiet=T,stringsAsFactors = F)
urbana2$nombre<- iconv(urbana2$nombre,from="UTF-8",to="ASCII//TRANSLIT")
# urbana2[1:10]
urbana2 <- st_transform(urbana2,crs=4326)
plot(mex2$geometry[88])#plotting Merida, 46; Opichen in 55; tekax & tizimin, 79 & 96; Teya, 88;
mex[88,]
mex2[88,]
plot(mex2$geometry[46])#plotting Merida, 46; Opichen in 55; tekax & tizimin, 79 & 96; Teya, 88;
mex2[46,]
plot(urbana2$geometry[162],add=T)#14 and 162 for Cholul; 61 and 222 for Opichen; 102, 130 MCP
mex2[16,]
plot(mex2$geometry[16])
#43,236 for Teya;
plot(urbana2$geometry[14],add=T)
mex2[10,]
plot(mex2$geometry[10])
#43,236 for Teya;
plot(urbana2$geometry[14],add=T)
par(mar=c(2.1,2.1,2.1,2.1))#margins
plot(st_geometry(mex0))#plots all of Mexico
plot(st_geometry(mex0),xlim=c(-90.75,-87.25),ylim=c(19.5,21.75),bg="lightblue",
col="gray")#takes all Mexico plot, plot just Yucatan
plot(st_geometry(mex2),add=T,col="#99FF99")
# plot(st_geometry(mex2.1),add=T,col="#99FF99")
# plot(st_geometry(rural),add=T,col="#99FF99")
plot(st_geometry(urbana2),add=T,col="red")
plot(mex2$geometry[88],add=T,col="yellow")#Teya mun
plot(urbana2$geometry[14],add=T,col="blue")
plot(mex2$geometry[46],add=T,col="yellow")#Merida mun
plot(urbana2$geometry[162],add=T,col="blue")
plot(urbana2$geometry[14],add=T,col="blue")
par(mar=c(2.1,2.1,2.1,2.1))#margins
plot(st_geometry(mex0))#plots all of Mexico
plot(st_geometry(mex0),xlim=c(-90.75,-87.25),ylim=c(19.5,21.75),bg="lightblue",
col="gray")#takes all Mexico plot, plot just Yucatan
plot(st_geometry(mex2),add=T,col="#99FF99")
# plot(st_geometry(mex2.1),add=T,col="#99FF99")
# plot(st_geometry(rural),add=T,col="#99FF99")
plot(st_geometry(urbana2),add=T,col="red")
plot(mex2$geometry[88],add=T,col="yellow")#Teya mun
plot(urbana2$geometry[235],add=T,col="blue")#Teya
plot(mex2$geometry[46],add=T,col="yellow")#Merida mun
plot(urbana2$geometry[162],add=T,col="blue")#Cholul urban
urbana2[236,]
par(mar=c(2.1,2.1,2.1,2.1))#margins
plot(st_geometry(mex0))#plots all of Mexico
plot(st_geometry(mex0),xlim=c(-90.75,-87.25),ylim=c(19.5,21.75),bg="lightblue",
col="gray")#takes all Mexico plot, plot just Yucatan
plot(st_geometry(mex2),add=T,col="#99FF99")
# plot(st_geometry(mex2.1),add=T,col="#99FF99")
# plot(st_geometry(rural),add=T,col="#99FF99")
plot(st_geometry(urbana2),add=T,col="red")
plot(mex2$geometry[88],add=T,col="yellow")#Teya mun
plot(urbana2$geometry[236],add=T,col="blue")#Teya
plot(mex2$geometry[46],add=T,col="yellow")#Merida mun
plot(urbana2$geometry[162],add=T,col="blue")#Cholul urban
plot(mex2$geometry[46],add=T,col="yellow")#Merida mun
par(mar=c(2.1,2.1,2.1,2.1))#margins
plot(st_geometry(mex0))#plots all of Mexico
plot(st_geometry(mex0),xlim=c(-90.75,-87.25),ylim=c(19.5,21.75),bg="lightblue",
col="gray")#takes all Mexico plot, plot just Yucatan
plot(st_geometry(mex2),add=T,col="#99FF99")
# plot(st_geometry(mex2.1),add=T,col="#99FF99")
# plot(st_geometry(rural),add=T,col="#99FF99")
plot(mex2$geometry[88],add=T,col="yellow")#Teya mun
plot(mex2$geometry[46],add=T,col="yellow")#Merida mun
plot(st_geometry(urbana2),add=T,col="red")
plot(urbana2$geometry[236],add=T,col="blue")#Teya
plot(urbana2$geometry[162],add=T,col="blue")#Cholul urban
par(mar=c(2.1,2.1,2.1,2.1))#margins
plot(st_geometry(mex0))#plots all of Mexico
plot(st_geometry(mex0),xlim=c(-90.75,-87.25),ylim=c(19.5,21.75),bg="lightblue",
col="gray")#takes all Mexico plot, plot just Yucatan
# plot(st_geometry(mex2),add=T,col="#99FF99")
# plot(st_geometry(mex2.1),add=T,col="#99FF99")
plot(st_geometry(rural),add=T,col="#99FF99")
length(unique(urbana2$nombre))
plot(rural$geometry[86:87],add=T,col="red")
par(mar=c(2.1,2.1,2.1,2.1))#margins
plot(st_geometry(mex0))#plots all of Mexico
plot(st_geometry(mex0),xlim=c(-90.75,-87.25),ylim=c(19.5,21.75),bg="lightblue",
col="gray")#takes all Mexico plot, plot just Yucatan
# plot(st_geometry(mex2),add=T,col="#99FF99")
# plot(st_geometry(mex2.1),add=T,col="#99FF99")
plot(st_geometry(rural),add=T,col="#99FF99")
#are rural and urbana municipalities of different codes??
# plot(mex2$geometry[88],add=T,col="yellow")#Teya mun
# plot(mex2$geometry[46],add=T,col="yellow")#Merida mun
plot(st_geometry(urbana2),add=T,col="red")
plot(rural$geometry[198],add=T,col="yellow")#Teya mun for rural
plot(rural$geometry[235:239],add=T,col="yellow")#Merida mun for rural
plot(urbana2$geometry[236],add=T,col="blue")#Teya
plot(urbana2$geometry[162],add=T,col="blue")#Cholul urban
plot(st_geometry(urbana2),add=T,col="red")
plot(urbana2$geometry[236],add=T,col="blue")#Teya
plot(urbana2$geometry[162],add=T,col="blue")#Cholul urban
nombre.repeats
plot(rural$geometry[72:78])#Izamal (72:78) & Tixmehuac
plot(rural$geometry[72:78],col=green)#Izamal (72:78) & Tixmehuac
plot(rural$geometry[72:78],col="green")#Izamal (72:78) & Tixmehuac
plot(urbana2$geometry[123],add=T)#14 and 162 for Cholul; 61 and 222 for Opichen; 102, 130 MCP
#43,236 for Teya; 123,242 for Kimbila
plot(urbana2$geometry[14],add=T,"blue")
plot(urbana2$geometry[123],add=T,col="blue")#14 and 162 for Cholul; 61 and 222 for Opichen; 102, 130 MCP
#43,236 for Teya; 123,242 for Kimbila
plot(urbana2$geometry[14],add=T,col="blue")
urbana2$geometry[14]
plot(urbana2$geometry[14])#,add=T,col="blue")
par(mar=c(2.1,2.1,2.1,2.1))#margins
plot(st_geometry(mex0))#plots all of Mexico
plot(st_geometry(mex0),xlim=c(-90.75,-87.25),ylim=c(19.5,21.75),bg="lightblue",
col="gray")#takes all Mexico plot, plot just Yucatan
# plot(st_geometry(mex2),add=T,col="#99FF99")
# plot(st_geometry(mex2.1),add=T,col="#99FF99")
plot(st_geometry(rural),add=T,col="#99FF99")
#are rural and urbana municipalities of different codes??
# plot(mex2$geometry[88],add=T,col="yellow")#Teya mun
# plot(mex2$geometry[46],add=T,col="yellow")#Merida mun
plot(urbana2$geometry[123],add=T,col="blue")#14 and 162 for Cholul; 61 and 222 for Opichen; 102, 130 MCP
#43,236 for Teya; 123,242 for Kimbila
plot(urbana2$geometry[14],add=T,col="blue")
plot(rural$geometry[64:65],col="green")#Izamal (72:78) & Tixmehuac (64:65)
plot(urbana2$geometry[123],add=T,col="blue")#14 and 162 for Cholul; 61 and 222 for Opichen; 102, 130 MCP
#43,236 for Teya; 123,242 for Kimbila
plot(urbana2$geometry[14],add=T,col="blue")
plot(rural$geometry[235:239],col="green")#
#Izamal (72:78) & Tixmehuac (64:65)
plot(urbana2$geometry[162],add=T,col="blue")#14 and 162 for Cholul; 61 and 222 for Opichen; 102, 130 MCP
#Izamal (72:78) & Tixmehuac (64:65)
plot(urbana2$geometry[14],add=T,col="blue")#14 and 162 for Cholul; 61 and 222 for Opichen; 102, 130 MCP
nombre.repeats
plot(rural$geometry[101:103],col="green")#
#Izamal (72:78) & Tixmehuac (64:65)
plot(urbana2$geometry[14],add=T,col="blue")#14 and 162 for Cholul; 61 and 222 for Opichen; 102, 130 MCP
plot(rural$geometry[217:226],col="green")#
#Izamal (72:78) & Tixmehuac (64:65)
plot(urbana2$geometry[14],add=T,col="blue")#14 and 162 for Cholul; 61 and 222 for Opichen; 102, 130 MCP
plot(rural$geometry[137],col="green")#Merida (235:239) & Cantamayec (101:103) for Cholul
#Opichen: 137
#Izamal (72:78) & Tixmehuac (64:65)
plot(urbana2$geometry[222],add=T,col="blue")#14 and 162 for Cholul; 61 and 222 for Opichen; 102, 130 MCP
plot(rural$geometry[198],col="green")#MUNICIPIOS: Merida (235:239) & Cantamayec (101:103) for Cholul
#Opichen: 137 Opichen, Opichen; MCP: NA; Teya, Teya (198)
#Izamal (72:78) & Tixmehuac (64:65)
plot(urbana2$geometry[43],add=T,col="blue")#14 and 162 for Cholul; 61 and 222 for Opichen; 102, 130 MCP
#43,236 for Teya; 123,242 for Kimbila (rural.shp)
plot(urbana2$geometry[236],add=T,col="blue")
nombre.repeats
plot(rural$geometry[209:213],col="green")#MUNICIPIOS: Merida (235:239) & Cantamayec (101:103) for Cholul
source('~/GitHub/U-of-Florida-Yucatan-Project/Code/geloc.R')
plot(rural$geometry[209:213],col="green")#MUNICIPIOS: Merida (235:239) & Cantamayec (101:103) for Cholul
#Opichen: 137 Opichen, Opichen; MCP: NA; Teya, Teya (198)
#Kimbila: Izamal (72:78) & Tixmehuac (64:65)
#Temozon: Temozon (209:213) & Abala (86:87)
plot(urbana2$geometry[1],add=T,col="blue")#14 and 162 for Cholul; 61 and 222 for Opichen; 102, 130 MCP
#43,236 for Teya; 123,242 for Kimbila ; Temozon (1, 262)
plot(urbana2$geometry[262],add=T,col="blue")
plot(rural$geometry[86:87],col="green")#MUNICIPIOS: Merida (235:239) & Cantamayec (101:103) for Cholul
#Opichen: 137 Opichen, Opichen; MCP: NA; Teya, Teya (198)
#Kimbila: Izamal (72:78) & Tixmehuac (64:65)
#Temozon: Temozon (209:213) & Abala (86:87)
plot(urbana2$geometry[1],add=T,col="blue")#14 and 162 for Cholul; 61 and 222 for Opichen; 102, 130 MCP
nombre.repeats
plot(rural$geometry[96:99],col="green")#MUNICIPIOS: Merida (235:239) & Cantamayec (101:103) for Cholul
#Opichen: 137 Opichen, Opichen; MCP: NA; Teya, Teya (198)
#Kimbila: Izamal (72:78) & Tixmehuac (64:65)
#Temozon: Temozon (209:213) & Abala (86:87)
#Ticimul: Chankom 96:99 (& Umal, but that one is fully matched)
plot(urbana2$geometry[292],add=T,col="blue")#14 and 162 for Cholul; 61 and 222 for Opichen; 102, 130 MCP
#43,236 for Teya; 123,242 for Kimbila ; Temozon (1, 262); Ticimul (292,295)
plot(urbana2$geometry[295],add=T,col="blue")
nombre.repeats
plot(rural$geometry[332:333],col="green")#MUNICIPIOS: Merida (235:239) & Cantamayec (101:103) for Cholul
#Opichen: 137 Opichen, Opichen; MCP: NA; Teya, Teya (198)
#Kimbila: Izamal (72:78) & Tixmehuac (64:65)
#Temozon: Temozon (209:213) & Abala (86:87)
#Ticimul: Chankom 96:99 (& Umal, but that one is fully matched)
#Xuilub: Espita 332:333 (& Valladolid but fully matched)
plot(urbana2$geometry[153],add=T,col="blue")#14 and 162 for Cholul; 61 and 222 for Opichen; 102, 130 MCP
#43,236 for Teya; 123,242 for Kimbila ; Temozon (1, 262); Ticimul (292,295); Xuilub (153,317)
plot(urbana2$geometry[317],add=T,col="blue")
urbana2[162,]
####cHANGING LOCALITIES, RENAMING SOME, REMOVING OTHERS THAT ARE DUPLICATES
urbana2$nombre[162] <- "CHOLUL MERIDA"
urbana2$nombre[1] <- "TEMOZON ABALA"
# urbana2<- urbana2[-61,]
urbana2[295,]
urbana2[242,]
# urbana2<- urbana2[-61,]
urbana2 <- urbana2[-c(43,61,153,242,295),]
#new modified addresses with hits from Linux
addresses2_hits <-read.csv("Linux Data/addresses2_mod2_hits.csv",header=T,stringsAsFactors = F);View(addresses2_hits)
#new modified addresses with hits from Linux
addresses2_hits <-read.csv("Linux Data/addresses2_mod2_hits.csv",header=T,stringsAsFactors = F);View(addresses2_hits)
for (i in seq(length(addresses2_hits$HITS))){
if ((i %in% urbana2_hits && grepl("ZERO_RESULTS",addresses2_hits$HITS[i]))==T){
addresses2_hits$HITS[i] <- "locality matches!" #phrase: "locality matches!"
}
}
##TO COUNT HOW MANY additional SCHOOL HITS FROM mex2 by MUNICIPALITY NAME
for (i in seq(length(addresses2_hits$HITS))){
if ((grepl("ZERO_RESULTS",addresses2_hits$HITS[i]))==T){
addresses2_hits$HITS[i] <- "municipality matches!" #phrase: "municipality matches!"
}
}
View(addresses2_hits)
length(unique(addresses2_hits$LOCALIDAD))
length(unique(urbana2$nombre))
unique(urbana2$nombre)
length(unique(urbana2$nombre))
length(urbana2$geometry)
View(urbana2)
length(urbana2$geografico)
urbana2$nombre[99:105]
urbana2$nombre[2]
urbana2$nombre[100]
urbana2 <- urbana2[-100]
length(urbana2$geografico)
urbana2 <- urbana2[-100]
# runif
###########################################################################################
urbana2 <- st_read("Shapefiles/INEGI mapa/localidad250_a.shp",quiet=T,stringsAsFactors = F)
urbana2$nombre<- iconv(urbana2$nombre,from="UTF-8",to="ASCII//TRANSLIT")
# urbana2[1:10]
urbana2 <- st_transform(urbana2,crs=4326)
####cHANGING LOCALITIES, RENAMING SOME, REMOVING OTHERS THAT ARE DUPLICATES
urbana2$nombre[162] <- "CHOLUL MERIDA"
urbana2$nombre[1] <- "TEMOZON ABALA"
View(urbana2)
urbana2 <- urbana2[-c(43,61,102,153,242,295),]
length(urbana2$geografico)
length(unique(urbana2$nombre))
View(addresses2)
class(rural$CVE_MUN)
rural$CVE_MUN <- as.numeric(rural$CVE_MUN)
st_read(paste0(rootdir,mapdir1,"yuc_ageb_rural.shp")
sdalkfjsd
paste0(rootdir,mapdir1,"yuc_ageb_rural.shp")
paste0(rootdir2,mapdir2
)
paste0(rootdir,mapdir1
)
getwd()
municipios<- read.csv("catalogo de municipios_mod.csv",header=T);View(municipios)
##Creating vector of municipios from addresses2 that are in rural file municipalities
nombre.municipios <- municipios$Nombre.del.Municipio
##Creating vector of municipios from addresses2 that are in rural file municipalities
nombre.municipios <- municipios$Nombre.del.Municipio
rural_hits=NULL
for (i in seq(addresses2$MUNICIPIO)){
if (addresses2$MUNICIPIO[i] %in% nombre.municipios==T){#if the address is in urbana2 (==FALSE)
rural_hits[i]=addresses2$MUNICIPIO[i]
}
else if (addresses2$MUNICIPIO[i] %in% nombre.municipios==F){
next
}
}
rural_hits <- (which(!is.na(rural_hits)))
rural_hits
##Creating vector of municipios from addresses2 that are in rural file municipalities
nombre.municipios <- municipios$Nombre.del.Municipio
rural_hits=NULL
for (i in seq(addresses2$MUNICIPIO)){
if (addresses2$MUNICIPIO[i] %in% nombre.municipios==T){#if the address is in urbana2 (==FALSE)
rural_hits[i]=addresses2$MUNICIPIO[i]
}
else if (addresses2$MUNICIPIO[i] %in% nombre.municipios==F){
next
}
}
rural_hits
rural_hits=NULL
for (i in seq(addresses2$MUNICIPIO)){
if (addresses2$MUNICIPIO[i] %in% nombre.municipios==T){#if the municipality is in rural.shp
rural_hits[i]=addresses2$MUNICIPIO[i]
}
else if (addresses2$MUNICIPIO[i] %in% nombre.municipios){
next
}
}
rural_hits
i=1
nombre.municipios
municipios<- read.csv("catalogo de municipios_mod.csv",header=T,stringsAsFactors = F);View(municipios)
##Creating vector of municipios from addresses2 that are in rural file municipalities
nombre.municipios <- municipios$Nombre.del.Municipio
nombre.municipios
rural_hits=NULL
for (i in seq(addresses2$MUNICIPIO)){
if (addresses2$MUNICIPIO[i] %in% nombre.municipios==T){#if the municipality is in rural.shp
rural_hits[i]=addresses2$MUNICIPIO[i]
}
else if (addresses2$MUNICIPIO[i] %in% nombre.municipios){
next
}
}
rural_hits
i=1
addresses2$MUNICIPIO[i] %in% nombre.municipios
urbana2 <- st_read("Shapefiles/INEGI mapa/localidad250_a.shp",quiet=T,stringsAsFactors = F)
head(urbana2)
urbana2 <- st_read("Shapefiles/INEGI mapa/localidad250_a.shp",quiet=T,stringsAsFactors = F)
urbana2$nombre<- iconv(urbana2$nombre,from="UTF-8",to="ASCII//TRANSLIT")
urbana2 <- st_transform(urbana2,crs=4326)##Converting coordinates from NAD83 to WGS84
municipios$Nombre.del.Municipio <- toupper(municipios$Nombre.del.Municipio)
municipios
##Creating vector of municipios from addresses2 that are in rural file municipalities
nombre.municipios <- municipios$Nombre.del.Municipio
rural_hits=NULL
for (i in seq(addresses2$MUNICIPIO)){
if (addresses2$MUNICIPIO[i] %in% nombre.municipios==T){#if the municipality is in rural.shp
rural_hits[i]=addresses2$MUNICIPIO[i]
}
else if (addresses2$MUNICIPIO[i] %in% nombre.municipios==F){
next
}
}
rural_hits
View(rural_hits)
(unique(rural_hits))
length((unique(rural_hits)))
rural_hits=NULL
for (i in seq(addresses2$MUNICIPIO)){
if (addresses2$MUNICIPIO[i] %in% nombre.municipios==T){#if the municipality is in rural.shp
rural_hits[i]=addresses2$MUNICIPIO[i]
}
else {
next
}
}
rural_hits
length((unique(rural_hits)))
plot(rural$geometry[86:87])
test_polygon=rural$geometry[86:87]
test_polygon
test_polygon2=union(rural$geometry[86],rural$geometry[87])
test_polygon2
test_polygon
plot(test_polygon2,col="green")
plot(test_polygon2[1],col="green")
plot(test_polygon2[[1],col="green")
plot(test_polygon2[[1]],col="green")
#Ben's code below
loc <- read.csv("catalogos/catalogo de municipios.csv"));head(loc)
#Ben's code below
loc <- read.csv("catalogos/catalogo de municipios.csv");head(loc)
#Ben's code below
loc <- read.csv("catalogo de municipios.csv");head(loc)
colnames(loc) <- c("CVE_ENT", "NAME_ENT", "CVE_MUN", "NAME_MUN")
# Encuesta 2015, but same issue that can't geolocate these
# 611 unique localities
rural$CVE_ENT <- as.numeric(rural$CVE_ENT)
#head(rural)
tmp <- left_join(rural, loc)
library(rgdal)
#head(rural)
tmp <- left_join(rural, loc)
?left_join.sf
library(dplyr)
#head(rural)
tmp <- left_join(rural, loc)
View(tmp)
length(loc$CVE_ENT)
View(loc)
